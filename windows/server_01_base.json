{
    "variables": {
      "builder_name": "",
      "os_name": "",
      "vm_name": "",
      "build_type": "",
      "cpu": "",
      "ram_size": "",
      "disk_size": "",
      "iso_url": "",
      "iso_checksum_type": "file",
      "iso_checksum": "",
      "communicator": "winrm",
      "username": "itadm",
      "password": "itadm",
      "output_directory": "",
      "unattend_file": "",
      "skip_export": "",
      "type": "",
      "generation": "",


      "vcenter_server": "",
      "insecure_connection": "",
      "datacenter": "",
      "folder": "",
      "cluster": "",
      "host": "",
      "resource_pool": "",
      "datastore": "",
      "vm_version": "",
      "guest_os_type": "",
      "firmware": "",
      "disk_controller_type": "",
      "disk_thin_provisioned": "",
      "disk_eagerly_scrub": "",
      "storage": "",
      "network_card": "",
      "network_adapters": "",
      "network": "",
      "mac_address": "",
      "passthrough": "",
      "usb_controller": "",
      "notes": "",
      "CPUs": "",
      "cpu_cores": "",
      "cpu_reservation": "",
      "cpu_limit": "",
      "cpu_hot_plug": "",
      "RAM": "",
      "RAM_reserve_all": "",
      "RAM_reservation": "",
      "RAM_hot_plug": "",
      "video_ram": "",
      "NestedHV": "",
      "shutdown_command": "",
      "shutdown_timeout": "",
      "ip_wait_timeout": "",
      "ip_settle_timeout": "",
      "iso_urls": "",
      "iso_checksum_url": "",
      "iso_target_path": "",
      "iso_target_extension": "",
      "cdrom_type": "",
      "iso_paths": "",
      "floppy_img_path": "",
      "floppy_files": "",
      "floppy_dirs": ""
    },

    "builders": [
        {
          "name": "hyperv-bios",
          "type": "hyperv-iso",
          "vm_name": "{{user `vm_name`}}",
          "disk_size": "{{user `disk_size`}}",
          "cpus": "{{user `cpu`}}",
          "memory": "{{user `ram_size`}}",
          "http_directory": "scripts",
          "floppy_files": [
            "{{ user `unattend_file` }}",
            "scripts/ConfigureRemotingForAnsible.ps1",
            "scripts/run-sysprep.cmd",
            "scripts/SetupComplete.cmd"
          ],
          "headless": false,
          "generation": "{{user `generation`}}",
          "iso_urls": "{{user `iso_url`}}",
          "iso_checksum_type": "{{user `iso_checksum_type`}}",
          "iso_checksum": "{{user `iso_checksum`}}",
          "communicator": "{{user `communicator`}}",
          "winrm_username": "{{user `username`}}",
          "winrm_password": "{{user `password`}}",
          "winrm_timeout" : "4h",
          "shutdown_command": "a:\\run-sysprep.cmd",
          "output_directory": "{{user `output_directory`}}",
          "skip_export": "{{user `skip_export`}}"
        },
        {
          "name": "hyperv-uefi",
          "type": "hyperv-iso",
          "vm_name": "{{user `vm_name`}}",
          "disk_size": "{{user `disk_size`}}",
          "cpus": "{{user `cpu`}}",
          "memory": "{{user `ram_size`}}",
          "http_directory": "scripts",
          "boot_command": [
            "a<enter><wait>a<enter><wait>a<enter><wait>a<enter>"
          ],
          "headless": false,
          "generation": "{{user `generation`}}",
          "iso_urls": "{{user `iso_url`}}",
          "iso_checksum_type": "{{user `iso_checksum_type`}}",
          "iso_checksum": "{{user `iso_checksum`}}",
          "communicator": "{{user `communicator`}}",
          "winrm_username": "{{user `username`}}",
          "winrm_password": "{{user `password`}}",
          "winrm_timeout" : "4h",
          "shutdown_command": "a:\\run-sysprep.cmd",
          "output_directory": "{{user `output_directory`}}",
          "skip_export": "{{user `skip_export`}}",
          "enable_secure_boot": true
        },
        {
          "name": "hyper-iso",
          "type": "hyper-iso",
          "iso_urls": "{{user `iso_url`}}",
          "iso_checksum_type": "{{user `iso_checksum_type`}}",
          "iso_checksum": "{{user `iso_checksum`}}",

          "output_directory": "{{user `output_directory`}}",
          "disk_size": "{{user `disk_size`}}",
          "use_legacy_network_adapter": "{{user `use_legacy_network_adapter`}}",
          "differencing_disk": "{{user `differencing_disk`}}",
          "use_fixed_vhd_format": "{{user `use_fixed_vhd_format`}}",
          "disk_block_size": "{{user `disk_block_size`}}",
          "memory": "{{user `memory`}}",
          "secondary_iso_image": "{{user `secondary_iso_image`}}",
          "disk_additional_size": "{{user `disk_additional_size`}}",
          "guest_additions_mode": "{{user `guest_additions_mode`}}",
          "guest_additions_path": "{{user `guest_additions_path`}}",
          "vm_name": "{{user `vm_name`}}",
          "switch_name": "{{user `switch_name`}}",
          "switch_vlan_id": "{{user `switch_vlan_id`}}",
          "mac_address": "{{user `mac_address`}}",
          "vlan_id": "{{user `vlan_id`}}",
          "cpus": "{{user `cpus`}}",
          "generation": "{{user `generation`}}",
          "enable_mac_spoofing": "{{user `enable_mac_spoofing`}}",
          "enable_dynamic_memory": "{{user `enable_dynamic_memory`}}",
          "enable_secure_boot": "{{user `enable_secure_boot`}}",
          "secure_boot_template": "{{user `secure_boot_template`}}",
          "enable_virtualization_extensions": "{{user `enable_virtualization_extensions`}}",
          "temp_path": "{{user `temp_path`}}",
          "configuration_version": "{{user `configuration_version`}}",
          "keep_registered": "{{user `keep_registered`}}",
          "communicator": "{{user `communicator`}}",
          "skip_compaction": "{{user `skip_compaction`}}",
          "skip_export": "{{user `skip_export`}}",
          "headless": "{{user `headless`}}",
          "first_boot_device": "{{user `first_boot_device`}}",

          "http_directory": "{{user `http_directory`}}",
          "http_port_min": "{{user `http_port_min`}}",
          "http_port_max": "{{user `http_port_max`}}",

          "shutdown_command": "{{user `shutdown_command`}}",
          "shutdown_timeout": "{{user `shutdown_timeout`}}",

          "floppy_files": "{{user `floppy_files`}}",
          "floppy_dirs": "{{user `floppy_dirs`}}",
          "floppy_label": "{{user `floppy_label`}}"
        },
        {
          "type": "vsphere-iso",

          "vcenter_server": "{{kuser `vcenter_server`}}",
          "username": "{{user `username`}}",
          "password": "{{user `password`}}",
          "insecure_connection": "{{user `insecure_connection`}}",
          "datacenter": "{{user `datacenter`}}",

          "communicator": "{{user `communicator`}}",

          "vm_name": "{{user `vm_name`}}",
          "folder": "{{user `folder`}}",
          "cluster": "{{user `cluster`}}",
          "host": "{{user `host`}}",
          "resource_pool": "{{user `resource_pool`}}",
          "datastore": "{{user `datastore`}}",

          "vm_version": "{{user `vm_version`}}",
          "guest_os_type": "{{user `guest_os_type`}}",
          "firmware": "{{user `firmware`}}",
          "disk_controller_type": "{{user `disk_controller_type`}}",
          "disk_size": "{{user `disk_size`}}",
          "disk_thin_provisioned": "{{user `disk_thin_provisioned`}}",
          "disk_eagerly_scrub": "{{user `disk_eagerly_scrub`}}",
          "storage": "{{user `storage`}}",
          "network_card": "{{user `network_card`}}",
          "network_adapters": "{{user `network_adapters`}}",
          "network": "{{user `network`}}",
          "mac_address": "{{user `mac_address`}}",
          "passthrough": "{{user `passthrough`}}",
          "usb_controller": "{{user `usb_controller`}}",
          "notes": "{{user `notes`}}",

          "CPUs": "{{user `CPUs`}}",
          "cpu_cores": "{{user `cpu_cores`}}",
          "cpu_reservation": "{{user `cpu_reservation`}}",
          "cpu_limit": "{{user `cpu_limit`}}",
          "cpu_hot_plug": "{{user `cpu_hot_plug`}}",

          "RAM": "{{user `RAM`}}",
          "RAM_reserve_all": "{{user `RAM_reserve_all`}}",
          "RAM_reservation": "{{user `RAM_reservation`}}",
          "RAM_hot_plug": "{{user `RAM_hot_plug`}}",
          "video_ram": "{{user `video_ram`}}",
          "NestedHV": "{{user `NestedHV`}}",

          "shutdown_command": "{{user `shutdown_command`}}",
          "shutdown_timeout": "{{user `shutdown_timeout`}}",

          "ip_wait_timeout": "{{user `ip_wait_timeout`}}",
          "ip_settle_timeout": "{{user `ip_settle_timeout`}}",

          "iso_checksum": "{{user `iso_checksum`}}",
          "iso_urls": "{{user `iso_urls`}}",
          "iso_checksum_url": "{{user `iso_checksum_url`}}",
          "iso_checksum_type": "{{user `iso_checksum_type`}}",
          "iso_target_path": "{{user `iso_target_path`}}",
          "iso_target_extension": "{{user `iso_target_extension`}}",

          "cdrom_type": "{{user `cdrom_type`}}",
          "iso_paths": "{{user `iso_paths`}}",

          "floppy_img_path": "{{user `floppy_img_path`}}",
          "floppy_files": "{{user `floppy_files`}}",
          "floppy_dirs": "{{user `floppy_dirs`}}"
        }
      ]
}