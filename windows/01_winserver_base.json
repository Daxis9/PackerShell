{
    "variables": {
      "os_name": "",
      "vm_name": "",
      "build_type": "",
      "cpu": "",
      "ram_size": "",
      "disk_size": "40000",
      "iso_url": "Windows-Server-2019.iso",
      "iso_checksum_type": "sha256",
      "iso_checksum": "61A391F0DC98E703DA674DF3C984AC2EB432FF757F949385360E68476C920478",
      "communicator": "winrm",
      "username": "itadm",
      "password": "itadm",
      "output_directory": "",
      "unattend_file": ""
    },

    "builders": [
        {
          "type": "hyperv-iso",
          "vm_name": "{{user `vm_name`}}",
          "disK_size": "{{user `disk_size`}}",
          "cpus": "{{user `cpu`}}",
          "memory": "{{user `ram_size`}}",
          "boot_command": [
            "setup.exe /unattend:{{user `unattend_file`}}"
          ],
          "http_directory": "scripts",
          "floppy_files": [
            "scripts/serverstandard/autounattend.xml",
            "scripts/ConfigureRemotingForAnsible.ps1",
            "scripts/run-sysprep.cmd",
            "../shared/windows/SetupComplete.cmd"
          ],
          "headless": false,
          "iso_urls": "{{user `iso_url`}}",
          "iso_checksum_type": "{{user `iso_checksum_type`}}",
          "iso_checksum": "{{user `iso_checksum`}}",
          "communicator": "{{user `communicator`}}",
          "winrm_username": "{{user `username`}}",
          "winrm_password": "{{user `password`}}",
          "winrm_timeout" : "4h",
          "shutdown_command": "a:\\run-sysprep.cmd",
          "output_directory": "{{user `output_directory`}}"
        },
        {
          "type": "vsphere-iso",
          "vm_name": "{{user `vm_name`}}",
          "disK_size": "{{user `disk_size`}}",
          "cpus": "{{user `cpu`}}",
          "memory": "{{user `ram_size`}}",
          "floppy_files": [
            "scripts/serverstandard/autounattend.xml",
            "scripts/ConfigureRemotingForAnsible.ps1",
            "scripts/run-sysprep.cmd",
            "../shared/windows/SetupComplete.cmd"
          ],
          "headless": false,
          "iso_urls": "{{user `iso_url`}}",
          "iso_checksum_type": "{{user `iso_checksum_type`}}",
          "iso_checksum": "{{user `iso_checksum`}}",
          "communicator": "{{user `communicator`}}",
          "winrm_username": "{{user `username`}}",
          "winrm_password": "{{user `password`}}",
          "winrm_timeout" : "4h",
          "shutdown_command": "a:\\run-sysprep.cmd",
          "output_directory": "{{user `output_directory`}}"
        }
      ]
}